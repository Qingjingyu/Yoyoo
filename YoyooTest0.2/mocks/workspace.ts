import type {
    ArtifactItem,
    ConversationMessage,
    TaskItem,
} from "@/types/workspace";

export type WorkspaceTimelineItem = {
    id: string;
    type: "created" | "assigned" | "artifact";
    time: string;
    actor: string;
    title: string;
    detail: string;
};

export type WorkspaceConversationBundle = {
    messages: ConversationMessage[];
    tasks: TaskItem[];
    artifacts: ArtifactItem[];
    timeline: WorkspaceTimelineItem[];
};

const workspaceByConversation: Record<string, WorkspaceConversationBundle> = {
    "/": {
        messages: [
            {
                id: "c-1",
                role: "user",
                type: "voice",
                content: "这是今天会议录音，请先转成会议纪要。",
                createdAt: "09:00",
                conversationId: "conv-main",
            },
            {
                id: "c-2",
                role: "yoyoo",
                type: "text",
                content:
                    "已收到。我会先生成会议纪要任务，完成后自动拆分 PRD、运营视频和研发方案三个子任务。",
                createdAt: "09:01",
                conversationId: "conv-main",
            },
        ],
        tasks: [
            {
                id: "t-100",
                title: "会议录音转会议纪要",
                owner: "Yoyoo CTO",
                status: "in_progress",
                priority: "high",
                progress: 62,
                eta: "2026-02-18 12:00",
                updatedAt: "10:18",
                conversationId: "conv-main",
                tags: ["meeting", "summary"],
            },
            {
                id: "t-101",
                title: "编写 PRD 初稿",
                owner: "产品组",
                status: "todo",
                priority: "medium",
                progress: 0,
                eta: "2026-02-18 18:00",
                updatedAt: "10:18",
                conversationId: "conv-main",
                parentTaskId: "t-100",
                tags: ["prd"],
            },
            {
                id: "t-102",
                title: "生成运营视频脚本",
                owner: "运营组",
                status: "todo",
                priority: "medium",
                progress: 0,
                eta: "2026-02-18 19:00",
                updatedAt: "10:18",
                conversationId: "conv-main",
                parentTaskId: "t-100",
                tags: ["video", "marketing"],
            },
            {
                id: "t-103",
                title: "输出研发调整方案",
                owner: "研发组",
                status: "todo",
                priority: "high",
                progress: 0,
                eta: "2026-02-18 20:00",
                updatedAt: "10:18",
                conversationId: "conv-main",
                parentTaskId: "t-100",
                tags: ["engineering", "spec"],
            },
        ],
        artifacts: [
            {
                id: "a-1",
                title: "会议纪要 v0.2",
                type: "document",
                description: "包含关键决策、待办项、责任人和截止时间。",
                version: "v0.2",
                updatedAt: "10:15",
                fromTaskId: "t-100",
            },
            {
                id: "a-2",
                title: "产品需求草案",
                type: "code",
                description: "需求结构骨架（目标、范围、验收标准）。",
                version: "v0.1",
                updatedAt: "10:20",
                fromTaskId: "t-101",
                codeSnippet: "## PRD\n- 目标\n- 用户场景\n- 验收标准",
            },
            {
                id: "a-3",
                title: "预发布网页预览",
                type: "webpage",
                description: "任务详情与时间线预览页。",
                version: "preview-3",
                updatedAt: "10:22",
                fromTaskId: "t-103",
                sourceUrl: "https://openclaw.ai",
                previewUrl: "/images/video-pic-1.jpg",
            },
        ],
        timeline: [
            {
                id: "tl-1",
                type: "created",
                time: "09:00",
                actor: "董事长",
                title: "发起会议录音处理需求",
                detail: "输入源为语音记录，目标是形成可执行任务流。",
            },
            {
                id: "tl-2",
                type: "assigned",
                time: "09:01",
                actor: "Yoyoo CEO",
                title: "将执行任务下发给 CTO",
                detail: "CEO 只负责沟通与汇报，CTO 负责执行与拆解。",
            },
            {
                id: "tl-3",
                type: "artifact",
                time: "10:15",
                actor: "Yoyoo CTO",
                title: "输出会议纪要 v0.2",
                detail: "已归档至文件区，可继续派生 PRD/运营/研发子任务。",
            },
        ],
    },
    "/code-generation": {
        messages: [
            {
                id: "c-cg-1",
                role: "user",
                type: "text",
                content: "请用 Next.js 做一个企业官网首页。",
                createdAt: "11:12",
                conversationId: "conv-code",
            },
            {
                id: "c-cg-2",
                role: "yoyoo",
                type: "text",
                content: "已拆解为页面结构、组件开发、联调和验收四个阶段任务。",
                createdAt: "11:13",
                conversationId: "conv-code",
            },
        ],
        tasks: [
            {
                id: "t-cg-1",
                title: "首页 Hero 区开发",
                owner: "前端组",
                status: "in_progress",
                priority: "high",
                progress: 48,
                eta: "2026-02-18 17:00",
                updatedAt: "11:30",
                conversationId: "conv-code",
                tags: ["nextjs", "hero"],
            },
            {
                id: "t-cg-2",
                title: "组件样式统一",
                owner: "设计组",
                status: "todo",
                priority: "medium",
                progress: 0,
                eta: "2026-02-18 20:00",
                updatedAt: "11:30",
                conversationId: "conv-code",
                parentTaskId: "t-cg-1",
                tags: ["ui"],
            },
        ],
        artifacts: [
            {
                id: "a-cg-1",
                title: "Hero 区组件代码",
                type: "code",
                description: "含主标题、副标题与 CTA 的可复用组件。",
                version: "v0.3",
                updatedAt: "11:29",
                fromTaskId: "t-cg-1",
                codeSnippet:
                    "<Hero title=\"Yoyoo\" subtitle=\"AI employee system\" cta=\"立即开始\" />",
            },
        ],
        timeline: [
            {
                id: "tl-cg-1",
                type: "created",
                time: "11:12",
                actor: "董事长",
                title: "发起官网开发需求",
                detail: "目标是高可用、可扩展的企业首页。",
            },
            {
                id: "tl-cg-2",
                type: "assigned",
                time: "11:13",
                actor: "Yoyoo CEO",
                title: "分配给前端与设计组",
                detail: "前端先建骨架，设计组同步规范。",
            },
        ],
    },
    "/photo-editing": {
        messages: [
            {
                id: "c-pe-1",
                role: "user",
                type: "file",
                content: "请把这张产品图修成投放素材风格。",
                createdAt: "13:06",
                conversationId: "conv-photo",
            },
            {
                id: "c-pe-2",
                role: "yoyoo",
                type: "text",
                content: "已生成三套风格版本，并建立 A/B 测试任务。",
                createdAt: "13:08",
                conversationId: "conv-photo",
            },
        ],
        tasks: [
            {
                id: "t-pe-1",
                title: "主视觉调色与去噪",
                owner: "设计组",
                status: "review",
                priority: "medium",
                progress: 92,
                eta: "2026-02-18 16:30",
                updatedAt: "13:20",
                conversationId: "conv-photo",
                tags: ["image", "retouch"],
            },
        ],
        artifacts: [
            {
                id: "a-pe-1",
                title: "产品图修订版 A",
                type: "image",
                description: "适配首页首屏与社媒封面。",
                version: "v1.0",
                updatedAt: "13:19",
                fromTaskId: "t-pe-1",
                previewUrl: "/images/video-pic-1.jpg",
            },
        ],
        timeline: [
            {
                id: "tl-pe-1",
                type: "created",
                time: "13:06",
                actor: "董事长",
                title: "提交图片精修任务",
                detail: "要求风格统一并提高点击率。",
            },
            {
                id: "tl-pe-2",
                type: "artifact",
                time: "13:19",
                actor: "设计组",
                title: "交付修图版本 A",
                detail: "已可用于投放测试。",
            },
        ],
    },
    "/education-feedback": {
        messages: [
            {
                id: "c-ef-1",
                role: "user",
                type: "text",
                content: "请整理本周课程反馈，给出可执行优化建议。",
                createdAt: "14:10",
                conversationId: "conv-edu",
            },
            {
                id: "c-ef-2",
                role: "yoyoo",
                type: "text",
                content: "已完成反馈聚类，正在输出教学策略与改进计划。",
                createdAt: "14:12",
                conversationId: "conv-edu",
            },
        ],
        tasks: [
            {
                id: "t-ef-1",
                title: "课堂反馈聚类分析",
                owner: "数据组",
                status: "done",
                priority: "medium",
                progress: 100,
                eta: "2026-02-18 15:00",
                updatedAt: "14:45",
                conversationId: "conv-edu",
                tags: ["education", "analysis"],
            },
            {
                id: "t-ef-2",
                title: "输出教学优化建议",
                owner: "教研组",
                status: "in_progress",
                priority: "high",
                progress: 58,
                eta: "2026-02-18 17:30",
                updatedAt: "15:02",
                conversationId: "conv-edu",
                tags: ["teaching", "strategy"],
            },
        ],
        artifacts: [
            {
                id: "a-ef-1",
                title: "反馈分析报告",
                type: "document",
                description: "按课程模块输出满意度、问题点与改进机会。",
                version: "v1.1",
                updatedAt: "14:46",
                fromTaskId: "t-ef-1",
            },
            {
                id: "a-ef-2",
                title: "教学优化清单",
                type: "document",
                description: "含短期纠偏项与长期课程升级路线。",
                version: "v0.6",
                updatedAt: "15:02",
                fromTaskId: "t-ef-2",
            },
        ],
        timeline: [
            {
                id: "tl-ef-1",
                type: "created",
                time: "14:10",
                actor: "董事长",
                title: "发起课程反馈分析任务",
                detail: "目标是提升课程完课率与满意度。",
            },
            {
                id: "tl-ef-2",
                type: "artifact",
                time: "14:46",
                actor: "数据组",
                title: "交付反馈分析报告",
                detail: "核心问题已定位，可进入策略制定阶段。",
            },
        ],
    },
    "/audio-generation": {
        messages: [
            {
                id: "c-ag-1",
                role: "user",
                type: "text",
                content: "做一段 30 秒的品牌开场旁白，语气要有力量。",
                createdAt: "15:20",
                conversationId: "conv-audio",
            },
            {
                id: "c-ag-2",
                role: "yoyoo",
                type: "text",
                content: "已生成两版样音，并创建配乐与降噪后处理任务。",
                createdAt: "15:21",
                conversationId: "conv-audio",
            },
        ],
        tasks: [
            {
                id: "t-ag-1",
                title: "旁白文案与语音合成",
                owner: "音频组",
                status: "review",
                priority: "high",
                progress: 86,
                eta: "2026-02-18 18:00",
                updatedAt: "15:42",
                conversationId: "conv-audio",
                tags: ["tts", "brand"],
            },
            {
                id: "t-ag-2",
                title: "背景音乐混音与母带",
                owner: "后期组",
                status: "in_progress",
                priority: "medium",
                progress: 40,
                eta: "2026-02-18 19:00",
                updatedAt: "15:42",
                conversationId: "conv-audio",
                parentTaskId: "t-ag-1",
                tags: ["mixing"],
            },
        ],
        artifacts: [
            {
                id: "a-ag-1",
                title: "品牌旁白样音 A",
                type: "audio",
                description: "男声中低音，强调行动号召。",
                version: "v0.9",
                updatedAt: "15:40",
                fromTaskId: "t-ag-1",
                sourceUrl: "https://openclaw.ai",
            },
        ],
        timeline: [
            {
                id: "tl-ag-1",
                type: "created",
                time: "15:20",
                actor: "董事长",
                title: "发起品牌音频制作任务",
                detail: "目标用于产品介绍视频开场。",
            },
            {
                id: "tl-ag-2",
                type: "assigned",
                time: "15:21",
                actor: "Yoyoo CTO",
                title: "拆解为文案、合成、混音三阶段",
                detail: "先确保文案语气，再进入音频后期。",
            },
        ],
    },
    "/generation-socials-post": {
        messages: [
            {
                id: "c-sp-1",
                role: "user",
                type: "text",
                content: "给我做 3 条小红书内容，主题是 Yoyoo 员工协作。",
                createdAt: "16:05",
                conversationId: "conv-social",
            },
            {
                id: "c-sp-2",
                role: "yoyoo",
                type: "text",
                content: "已完成选题、脚本、封面文案草案，并生成发布排期。",
                createdAt: "16:07",
                conversationId: "conv-social",
            },
        ],
        tasks: [
            {
                id: "t-sp-1",
                title: "选题与脚本生成",
                owner: "内容组",
                status: "done",
                priority: "high",
                progress: 100,
                eta: "2026-02-18 16:30",
                updatedAt: "16:28",
                conversationId: "conv-social",
                tags: ["social", "script"],
            },
            {
                id: "t-sp-2",
                title: "封面与标题 A/B 方案",
                owner: "运营组",
                status: "in_progress",
                priority: "medium",
                progress: 66,
                eta: "2026-02-18 17:45",
                updatedAt: "16:34",
                conversationId: "conv-social",
                tags: ["cover", "headline"],
            },
        ],
        artifacts: [
            {
                id: "a-sp-1",
                title: "内容脚本包（3条）",
                type: "document",
                description: "每条含开场钩子、正文结构与 CTA。",
                version: "v1.0",
                updatedAt: "16:28",
                fromTaskId: "t-sp-1",
            },
            {
                id: "a-sp-2",
                title: "发布排期看板",
                type: "webpage",
                description: "按平台和时段的发布节奏安排。",
                version: "board-1",
                updatedAt: "16:35",
                fromTaskId: "t-sp-2",
                sourceUrl: "https://openclaw.ai",
                previewUrl: "/images/video-pic-1.jpg",
            },
        ],
        timeline: [
            {
                id: "tl-sp-1",
                type: "created",
                time: "16:05",
                actor: "董事长",
                title: "发起社媒内容生产任务",
                detail: "目标是提升品牌曝光与线索转化。",
            },
            {
                id: "tl-sp-2",
                type: "artifact",
                time: "16:28",
                actor: "内容组",
                title: "交付 3 条完整脚本",
                detail: "可直接进入设计与发布流程。",
            },
        ],
    },
};

export const getWorkspaceConversation = (conv: string): WorkspaceConversationBundle =>
    workspaceByConversation[conv] ?? {
        conversation: {
            conversationId: conv,
            owner: "Yoyoo",
            topic: "新对话",
            status: "planning",
            lastUpdated: "--:--",
        },
        messages: [],
        tasks: [],
        artifacts: [],
        timeline: [],
    };
