# 飞书/Notion 产品设计学习笔记

> **学习日期**: 2026-01-31
> **状态**: 🔥 进行中

---

## 1. 飞书产品分析

### 1.1 产品定位

```
┌─────────────────────────────────────────────────────────┐
│                   飞书产品定位                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  使命: "组织和连接企业的一切"                            │
│                                                         │
│  核心价值:                                              │
│  • 重新定义工作方式                                     │
│  • 跨团队协作                                           │
│  • 知识管理                                             │
│                                                         │
│  目标用户:                                              │
│  • 互联网/科技公司 (早期采用者)                         │
│  • 知识工作者                                           │
│  • 分布式团队                                           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 1.2 核心功能矩阵

| 模块 | 功能 | Yoyoo 借鉴点 |
|------|------|-------------|
| **即时通讯** | 消息、表情回复、线程 | Bot 消息交互 |
| **云文档** | 文档、表格、思维导图 | 知识库结构 |
| **日历** | 会议、日程 | 任务调度 |
| **云盘** | 文件存储、协作 | 记忆存储 |
| **任务管理** | OKR、任务卡片 | 任务协作 |
| **多维表格** | 数据库视图 | 数据建模 |

### 1.3 交互设计亮点

```
┌─────────────────────────────────────────────────────────┐
│                   飞书交互亮点                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. 消息线程 (Message Thread)                           │
│  ┌─────────────────────────────────────────────────┐   │
│  │  苏白: 产品设计文档更新了                        │   │
│  │  ───────────────────────────────────────────── │   │
│  │  ✨ 小明: 收到，已开始 review                   │   │
│  │  ───────────────────────────────────────────── │   │
│  │  ✨ 小李: 建议增加用户场景                      │   │
│  └─────────────────────────────────────────────────┘   │
│     → 保持对话聚焦，支持异步讨论                       │
│                                                         │
│  2. 快捷回复 (Quick Reactions)                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  [👍][❤️][🎉][😮][👀][💯]                       │   │
│  └─────────────────────────────────────────────────┘   │
│     → 减少打扰，快速反馈                               │
│                                                         │
│  3. @提及 + 关联                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │  请 @小明 看文档，涉及 OKR-003                  │   │
│  └─────────────────────────────────────────────────┘   │
│     → 上下文关联，自动化通知                           │
│                                                         │
│  4. 侧边栏导航                                          │
│  ┌─────────────────────────────────────────────────┐   │
│  │  🏠 消息    │  主工作区                          │   │
│  │  📄 文档    │  ├── 全部文档                      │   │
│  │  📅 日历    │  ├── 最近使用                      │   │
│  │  ✅ 任务    │  ├── 收藏                          │   │
│  │  📁 云盘    │  └── 共享空间                      │   │
│  │  ⚙️ 设置    │                                    │   │
│  └─────────────────────────────────────────────────┘   │
│     → 清晰的层级结构                                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 1.4 Bot 消息设计

```json
{
  "type": "card",
  "header": {
    "title": "任务提醒",
    "subtitle": "协作协议设计",
    "image_url": "https://xxx.com/icon.png"
  },
  "elements": [
    {
      "type": "section",
      "text": {
        "type": "markdown",
        "content": "**苏白** 分配了一个新任务给你\n\n> 协作协议设计文档需要在 *明天 18:00* 前完成"
      }
    },
    {
      "type": "action",
      "actions": [
        {
          "type": "button",
          "text": "接受任务",
          "style": "primary",
          "value": "accept_task_123"
        },
        {
          "type": "button",
          "text": "协商延期",
          "value": "negotiate_task_123"
        },
        {
          "type": "button",
          "text": "查看详情",
          "url": "https://yoyoo.app/tasks/123"
        }
      ]
    }
  ]
}
```

### 1.5 工作流自动化

```
┌─────────────────────────────────────────────────────────┐
│                   飞书工作流引擎                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  触发器 → 条件判断 → 动作执行                           │
│                                                         │
│  示例工作流:                                            │
│  1. 触发: 文档更新                                      │
│  2. 条件: 文档类型 == "产品设计"                        │
│  3. 动作:                                              │
│     - 通知相关人员                                      │
│     - 更新任务状态                                      │
│     - 归档旧版本                                       │
│                                                         │
│  Yoyoo 可借鉴:                                          │
│  • 定时触发: "每天 9:00 生成日报"                      │
│  • 事件触发: "收到新消息时唤醒"                         │
│  • 条件分支: "优先级高则立即处理"                       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 2. Notion 产品分析

### 2.1 产品定位

```
┌─────────────────────────────────────────────────────────┐
│                   Notion 产品定位                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  标语: "All your tools, one place"                     │
│                                                         │
│  核心理念:                                              │
│  • 工作空间即数据库                                     │
│  • 块级编辑 (Block-based)                               │
│  • 无限嵌套 (Nested pages)                              │
│  • 自由拖拽 (Drag & drop)                               │
│                                                         │
│  目标用户:                                              │
│  • 个人知识管理                                         │
│  • 团队协作                                             │
│  • 项目管理                                             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.2 块级编辑系统

```markdown
# 文档结构示例

## 标题 (Heading 2)
这是段落文本...

### 列表项 (Bulleted List)
- 项目 1
- 项目 2
  - 子项目 2.1
  - 子项目 2.2

### 代码块 (Code Block)
```python
def hello():
    print("Hello Yoyoo")
```

### 嵌入块 (Embed)
- [Figma 设计](https://figma.com/...)
- [Airtable 表格](https://airtable.com/...)
```

### 2.3 数据库视图

```
┌─────────────────────────────────────────────────────────┐
│                   Notion 数据库视图                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  同一个数据库，多种视图:                                │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  📋 表格视图 (Table)                             │   │
│  │  ┌──────┬──────┬──────┬──────┐                │   │
│  │  │ 名称 │ 状态 │ 负责人 │ 截止 │                │   │
│  │  ├──────┼──────┼──────┼──────┤                │   │
│  │  │ 任务A │ 进行中 │ 苏白  │ 1/31 │                │   │
│  │  │ 任务B │ 待办  │ 小明  │ 2/1  │                │   │
│  │  └──────┴──────┴──────┴──────┘                │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  📊 看板视图 (Board)                             │   │
│  │  ┌─────────┬─────────┬─────────┐               │   │
│  │  │ 待办    │ 进行中   │ 已完成   │               │   │
│  │  ├─────────┼─────────┼─────────┤               │   │
│  │  │ 任务B   │ 任务A   │ 任务C   │               │   │
│  │  └─────────┼─────────┴─────────┘               │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  📅 日历视图 (Calendar)                          │   │
│  │  ┌─────────────────────────────┐                │   │
│  │  │  周一    周二    周三  ...  │                │   │
│  │  │  任务B   任务A              │                │   │
│  │  └─────────────────────────────┘                │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  📈 画廊视图 (Gallery)                           │   │
│  │  [卡片1] [卡片2] [卡片3]                        │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.4 关系数据库

```
┌─────────────────────────────────────────────────────────┐
│                   Notion 关系设计                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  项目数据库 ────←─── 任务数据库                         │
│     │                    │                              │
│     │ 1:N                │ N:1                          │
│     ↓                    ↓                              │
│  ┌─────────┐         ┌─────────┐                       │
│  │ Project │         │  Task   │                       │
│  ├─────────┤         ├─────────┤                       │
│  │ id      │──←──────│ project │                       │
│  │ name    │         │ id      │                       │
│  │ owner   │         │ title   │                       │
│  └─────────┘         └─────────┘                       │
│                                                         │
│  任务数据库 ────←─── 子任务数据库                       │
│     │                                                     │
│     │ 1:N                                               │
│     ↓                                                    │
│  ┌─────────┐                                            │
│  │  Task   │                                            │
│  ├─────────┤                                            │
│  │ id      │──←── SubTask                               │
│  │ title   │                                            │
│  │ status  │                                            │
│  └─────────┘                                            │
│                                                         │
│  用户数据库 ────←─── 任务数据库                         │
│     │                    │                              │
│     │ 1:N                │ N:M (多对多)                 │
│     ↓                    ↓                              │
│  ┌─────────┐         ┌─────────┐    ┌─────────┐       │
│  │  User   │         │  Task   │    │ TaskAssign │     │
│  ├─────────┤         ├─────────┤    ├───────────┤     │
│  │ id      │──←──────│ id      │    │ user_id    │     │
│  │ name    │         │ title   │    │ task_id    │     │
│  └─────────┘         └─────────┘    └───────────┘     │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.5 模板系统

```json
{
  "template": "yoyoo_daily_note",
  "name": "Yoyoo 每日笔记",
  "structure": {
    "blocks": [
      {"type": "heading_1", "content": "## {{date}} 每日记录"},
      {"type": "divider"},
      {"type": "heading_2", "content": "### 🎯 今日目标"},
      {"type": "bulleted_list", "items": ["", "", ""]},
      {"type": "heading_2", "content": "### 📋 任务进度"},
      {"type": "toggle", "content": "查看详情", "collapsed": true},
      {"type": "heading_2", "content": "### 💡 新学到的"},
      {"type": "paragraph", "content": ""},
      {"type": "heading_2", "content": "### 🤖 Yoyoo 协作"},
      {"type": "callout", "emoji": "✨", "content": ""},
      {"type": "heading_2", "content": "### 📝 明日待办"},
      {"type": "bulleted_list", "items": ["", "", ""]}
    ],
    "properties": {
      "date": {"type": "date", "format": "YYYY-MM-DD"},
      "mood": {"type": "select", "options": ["😊", "😐", "😴"]},
      "productivity": {"type": "number", "min": 1, "max": 10}
    }
  }
}
```

---

## 3. 办公产品核心设计原则

### 3.1 信息架构

```
┌─────────────────────────────────────────────────────────┐
│                   信息架构层次                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  Level 1: Workspace (工作区)                           │
│  ├── 个人空间 (Personal)                                │
│  ├── 团队空间 (Team)                                    │
│  └── 组织空间 (Organization)                            │
│                                                         │
│  Level 2: Container (容器)                             │
│  ├── 项目 (Project)                                     │
│  ├── 知识库 (Knowledge Base)                           │
│  └── 任务板 (Task Board)                                │
│                                                         │
│  Level 3: Item (条目)                                  │
│  ├── 页面 (Page)                                        │
│  ├── 文档 (Document)                                    │
│  └── 记录 (Record)                                      │
│                                                         │
│  Level 4: Block (块)                                    │
│  ├── 文本块                                             │
│  ├── 媒体块                                             │
│  └── 嵌入块                                             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 3.2 导航设计

```
┌─────────────────────────────────────────────────────────┐
│                   导航设计模式                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. 全局导航 (侧边栏)                                    │
│  ┌────────────────────┐                                 │
│  │ 🏠 Home           │                                 │
│  │ 📥 Inbox (3)      │  快速访问                       │
│  │ ────────────────  │                                 │
│  │ 📁 My Yoyoo       │  个人空间                       │
│  │ ├── 📄 文档       │                                 │
│  │ ├── ✅ 任务       │                                 │
│  │ └── 💾 记忆       │                                 │
│  │ ────────────────  │                                 │
│  │ 👥 Team Space     │  团队空间                       │
│  └── ⚙️ Settings     │                                 │
│                      │                                 │
│  2. 面包屑导航                                         │
│  Home / My Yoyoo / 文档 / 产品设计                      │
│                                                         │
│  3. 搜索 (全局 Command+K)                               │
│  ┌─────────────────────────────────────────────────┐   │
│  │  🔍 搜索文档、任务、记忆...                      │   │
│  │  ───────────────────────────────────────────── │   │
│  │  📄 产品设计     在 文档中      [→]             │   │
│  │  ✅ 协作协议     在 任务中      [→]             │   │
│  │  💾 苏白偏好     在 记忆中      [→]             │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  4. 最近访问                                            │
│  显示最近编辑/查看的 10 个条目                          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 3.3 搜索设计

```python
class SearchSystem:
    """多维度搜索系统"""

    async def search(self, query: str, user_id: UUID, filters: dict = None):
        # 1. 向量搜索 (语义匹配)
        vector_results = await self.vector_search(query, user_id)

        # 2. 关键词搜索 (精确匹配)
        keyword_results = await self.keyword_search(query, user_id)

        # 3. 混合排序
        combined = self.hybrid_rank(
            vector_results,
            keyword_results,
            weights={'vector': 0.6, 'keyword': 0.4}
        )

        # 4. 按类型分组
        grouped = self.group_by_type(combined)

        return grouped

# 搜索过滤器
filters = {
    'type': ['document', 'task', 'memory'],
    'date_range': {'start': '2026-01-01', 'end': '2026-01-31'},
    'status': ['in_progress', 'pending'],
    'owner': ['self', 'shared']
}
```

### 3.4 权限设计

```
┌─────────────────────────────────────────────────────────┐
│                   权限模型                               │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  权限级别:                                              │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 层级  │  名称     │  权限                         │   │
│  ├───────┼───────────┼──────────────────────────────┤   │
│  │  0    │ 无访问    │ 无法看到                      │   │
│  │  1    │ 查看      │ 只读                          │   │
│  │  2    │ 评论      │ 查看 + 评论                   │   │
│  │  3    │ 编辑      │ 查看 + 评论 + 编辑            │   │
│  │  4    │ 管理      │ 所有权限 + 分享               │   │
│  │  5    │ 所有者    │ 完整控制 + 删除               │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  权限继承:                                              │
│  Workspace → Space → Container → Item                   │
│     ↓                                                   │
│  子项继承父级权限，可单独设置覆盖                       │
│                                                         │
│  Yoyoo 协作权限:                                        │
│  • 任务发起者: 管理权限                                  │
│  • 任务执行者: 编辑权限                                  │
│  • 协作方: 查看权限                                      │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 4. 协作功能设计

### 4.1 实时协作

```
┌─────────────────────────────────────────────────────────┐
│                   实时协作机制                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. 操作转换 (OT - Operational Transform)              │
│                                                         │
│  用户 A: "Hello" ──────────→ [A: Hello]                │
│       ↓                                                      │
│  用户 B: "World" ─────────→ [B: World]                 │
│       ↓                                                      │
│  冲突解决:                                                │
│  - 时间戳排序: A 先，B 后                                │
│  - 结果: [A: Hello][B: World]                          │
│                                                         │
│  2. 状态同步                                             │
│                                                         │
│  ┌─────────┐     ┌─────────┐     ┌─────────┐          │
│  │ Client A│ ←→ │  Server │ ←→ │ Client B│          │
│  └─────────┘     └─────────┘     └─────────┘          │
│       │               │               │                │
│       ↓               ↓               ↓                │
│  [状态 A]        [全局状态]      [状态 B]              │
│                                                         │
│  3. 光标/选区同步                                        │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  Hello [World]!                               │   │
│  │       ↑                                       │   │
│  │     小明的光标                                 │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 4.2 通知系统

```python
class NotificationSystem:
    """智能通知系统"""

    async def send_notification(self, user_id: UUID, notification: dict):
        # 1. 检查通知偏好
        preferences = await self.get_preferences(user_id)

        if not self.should_notify(notification, preferences):
            return

        # 2. 选择通知渠道
        channel = self.select_channel(notification, preferences)

        # 3. 发送通知
        await self.send(user_id, notification, channel)

    def should_notify(self, notification: dict, preferences: dict) -> bool:
        # 免打扰时段
        if self.is_quiet_hours(preferences):
            return False

        # 通知类型开关
        if notification['type'] not in preferences['enabled_types']:
            return False

        # 聚合阈值
        if notification['urgency'] == 'low':
            return not self.should_batch(user_id)

        return True
```

### 4.3 协作状态

```
┌─────────────────────────────────────────────────────────┐
│                   协作状态管理                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  任务协作状态:                                          │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │                    ┌─────────────┐               │   │
│  │  分配任务 ───────→ │  待确认     │               │   │
│  │                    └──────┬──────┘               │   │
│  │                           │ 接受                  │   │
│  │                    ┌──────▼──────┐               │   │
│  │                    │  进行中     │ ←─── 协作     │   │
│  │                    │  👤👤👤    │               │   │
│  │                    └──────┬──────┘               │   │
│  │                           │ 完成                  │   │
│  │                    ┌──────▼──────┐               │   │
│  │                    │  已完成     │ ←─── 验收     │   │
│  │                    └─────────────┘               │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  在线状态:                                              │
│  🟢 在线  |  🟡 离开  |  🔴 忙碌  |  ⚫ 离线            │
│                                                         │
│  活跃协作者:                                            │
│  当前有 3 人在编辑此文档                                 │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 5. Yoyoo 产品设计借鉴

### 5.1 消息交互设计

```
┌─────────────────────────────────────────────────────────┐
│                   Yoyoo 消息交互                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. 对话式 Bot                                          │
│  ┌─────────────────────────────────────────────────┐   │
│  │  苏白: 帮我整理今天的任务                        │   │
│  │  ───────────────────────────────────────────── │   │
│  │  ✨ Yoyoo:                                      │   │
│  │  今天你有 5 个待办任务:                         │   │
│  │                                                 │   │
│  │  1. ✅ 协作协议设计 (进行中)                    │   │
│  │  2. 📋 Git 工作流学习 (完成)                   │   │
│  │  3. 📋 PostgreSQL 学习 (完成)                  │   │
│  │  4. ⏳ 向量数据库学习 (80%)                     │   │
│  │  5. ⏳ 产品设计分析 (进行中)                    │   │
│  │                                                 │   │
│  │  需要我帮你更新状态吗?                          │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  2. 任务卡片                                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │  🃏 任务卡片                                    │   │
│  │  ───────────────────────────────────────────── │   │
│  │  标题: 完成协作协议设计文档                     │   │
│  │  优先级: 🔴 高                                  │   │
│  │  截止: 今天 18:00                              │   │
│  │  进度: ████████░░ 80%                          │   │
│  │  ───────────────────────────────────────────── │   │
│  │  💬 2 条讨论  │  👤 苏白  │  🔔 提醒我         │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  3. 快捷操作                                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │  [✅ 完成任务] [⏸️ 暂停] [💬 讨论] [📤 移交]  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 5.2 知识库结构

```
Yoyoo 知识库/
├── 📁 个人知识
│   ├── 📄 每日笔记
│   │   ├── 2026-01-30.md
│   │   └── 2026-01-31.md
│   ├── 📄 项目笔记
│   │   └── Yoyoo V2.0/
│   │       ├── 产品设计.md
│   │       ├── 技术架构.md
│   │       └── 协作协议.md
│   └── 📄 技能库
│       ├── 编程技能/
│       └── 写作技能/
│
├── 📁 团队协作
│   ├── 📄 团队任务
│   │   ├── Sprint 1/
│   │   └── Sprint 2/
│   └── 📄 共享知识
│       ├── 最佳实践/
│       └── 技术文档/
│
└── 📁 系统配置
    ├── 📄 技能配置
    ├── 📄 提醒规则
    └── 📄 协作协议配置
```

### 5.3 工作流模板

```python
# Yoyoo 工作流模板
WORKFLOWS = {
    "daily_summary": {
        "name": "每日总结",
        "trigger": {"type": "cron", "value": "0 21:00 * * *"},
        "actions": [
            {"type": "collect_tasks", "status": ["in_progress", "completed"]},
            {"type": "generate_summary", "format": "markdown"},
            {"type": "send_to_user", "channel": "im"}
        ]
    },

    "task_reminder": {
        "name": "任务提醒",
        "trigger": {"type": "event", "value": "task_due_soon"},
        "actions": [
            {"type": "check_priority"},
            {"type": "notify_user", "channels": ["im", "email"]}
        ]
    },

    "memory_extraction": {
        "name": "记忆提取",
        "trigger": {"type": "cron", "value": "*/30 * * * *"},
        "actions": [
            {"type": "scan_conversation"},
            {"type": "extract_facts"},
            {"type": "persist_memory"}
        ]
    },

    "weekly_review": {
        "name": "周回顾",
        "trigger": {"type": "cron", "value": "0 18:00 * * 0"},
        "actions": [
            {"type": "collect_weekly_memories"},
            {"type": "update_summaries"},
            {"type": "archive_old_tasks"}
        ]
    }
}
```

---

## 6. 学习总结

### 核心要点

1. **飞书**:
   - 消息线程 + 快捷回复
   - Bot 消息卡片设计
   - 工作流自动化
   - 多维表格

2. **Notion**:
   - 块级编辑系统
   - 数据库视图切换
   - 模板系统
   - 关系数据库

3. **通用设计原则**:
   - 清晰的信息架构
   - 强大的搜索系统
   - 细粒度权限控制
   - 实时协作机制

### Yoyoo 可借鉴

| 来源 | 借鉴点 |
|------|--------|
| 飞书 | Bot 消息卡片、@提及、工作流 |
| Notion | 块级编辑、知识库结构、模板 |
| 两者 | 导航设计、搜索、权限、协作状态 |

---

## 参考资源

- [飞书开放平台](https://open.feishu.cn/)
- [Notion API](https://developers.notion.com/)
- [飞书交互规范](https://open.feishu.cn/document/ukTMukTMukTM/uQTOuYTOuYDM2kjN5)
- [Notion 块编辑](https://developers.notion.com/reference/block)
