# Git å·¥ä½œæµå­¦ä¹ ç¬”è®°

> **å­¦ä¹ æ—¥æœŸ**: 2026-01-31
> **çŠ¶æ€**: ğŸ”¥ è¿›è¡Œä¸­

---

## 1. Git æ ¸å¿ƒæ¦‚å¿µ

### 1.1 ä¸‰æ£µæ ‘æ¨¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Git ä¸‰æ£µæ ‘                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Working Directory (å·¥ä½œç›®å½•)                           â”‚
â”‚       â†“ add       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚       â†“           â”‚   Staging    â”‚   â† Index (æš‚å­˜åŒº)   â”‚
â”‚       â†“  commit   â”‚   Area       â”‚                      â”‚
â”‚       â†“           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚       â†“           â”‚   Repository â”‚   â† .git ç›®å½•        â”‚
â”‚       â†“           â”‚   (æœ¬åœ°ä»“åº“)  â”‚                      â”‚
â”‚       â†“           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚       â†“           â”‚  Remote      â”‚   â† GitHub/GitLab    â”‚
â”‚       â†“ fetch/push â”‚  Repository â”‚                      â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒå‘½ä»¤

| å‘½ä»¤ | ä½œç”¨ | å¸¸ç”¨å‚æ•° |
|------|------|----------|
| `git init` | åˆå§‹åŒ–ä»“åº“ | `--bare` (è£¸ä»“åº“) |
| `git add` | æ·»åŠ åˆ°æš‚å­˜åŒº | `.` (å…¨éƒ¨), `-p` (äº¤äº’å¼) |
| `git commit` | æäº¤ | `-m` (æ¶ˆæ¯), `--amend` (ä¿®æ”¹) |
| `git status` | æŸ¥çœ‹çŠ¶æ€ | `-s` (ç®€çŸ­) |
| `git log` | æŸ¥çœ‹å†å² | `--oneline`, `--graph` |
| `git diff` | æŸ¥çœ‹å·®å¼‚ | `--staged` (æš‚å­˜åŒº) |
| `git checkout` | åˆ‡æ¢åˆ†æ”¯ | `-b` (åˆ›å»ºå¹¶åˆ‡æ¢) |
| `git branch` | ç®¡ç†åˆ†æ”¯ | `-d` (åˆ é™¤), `-v` (è¯¦æƒ…) |
| `git merge` | åˆå¹¶åˆ†æ”¯ | `--no-ff` (ç¦æ­¢å¿«è¿›) |
| `git rebase` | å˜åŸº | `-i` (äº¤äº’å¼) |
| `git remote` | è¿œç¨‹ç®¡ç† | `add`, `remove`, `-v` |
| `git push` | æ¨é€åˆ°è¿œç¨‹ | `-u` (å…³è”), `--force` |
| `git pull` | æ‹‰å–å¹¶åˆå¹¶ | `--rebase` (å˜åŸº) |

---

## 2. åˆ†æ”¯ç®¡ç†ç­–ç•¥

### 2.1 Git Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Git Flow åˆ†æ”¯æ¨¡å‹                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  main (ç”Ÿäº§ç¯å¢ƒ)                                        â”‚
â”‚    â”‚        â”‚                                          â”‚
â”‚    â”‚   hotfix/                                        â”‚
â”‚    â”‚   fix-001  â†â”€â”€ ç´§æ€¥ä¿®å¤                           â”‚
â”‚    â”‚        â”‚                                          â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜                                          â”‚
â”‚         â”‚                                              â”‚
â”‚    develop (å¼€å‘ä¸»åˆ†æ”¯)                                 â”‚
â”‚         â”‚                                              â”‚
â”‚    feature/                                            â”‚
â”‚    feature-api   â†â”€â”€ æ–°åŠŸèƒ½å¼€å‘                         â”‚
â”‚         â”‚                                              â”‚
â”‚    release/                                            â”‚
â”‚    v1.0.0       â†â”€â”€ å‡†å¤‡å‘å¸ƒ                           â”‚
â”‚         â”‚                                              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 GitHub Flow (æ›´ç®€å•)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GitHub Flow                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  main (éšæ—¶å¯éƒ¨ç½²)                                      â”‚
â”‚         â”‚                                              â”‚
â”‚         â”‚  1. ä» main åˆ›å»ºåˆ†æ”¯                          â”‚
â”‚         â†“                                              â”‚
â”‚    feature/xxx  â†â”€â”€ å¼€å‘                                â”‚
â”‚         â”‚                                              â”‚
â”‚         â”‚  2. æäº¤ Pull Request                        â”‚
â”‚         â†“                                              â”‚
â”‚    code review + CI é€šè¿‡                               â”‚
â”‚         â”‚                                              â”‚
â”‚         â”‚  3. åˆå¹¶åˆ° main                              â”‚
â”‚         â†“                                              â”‚
â”‚    main (è‡ªåŠ¨éƒ¨ç½²)                                     â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 æˆ‘ä»¬çš„é€‰æ‹©ï¼šGitHub Flow + Trunk-Based

å¯¹äº Yoyoo é¡¹ç›®ï¼Œæ¨èä½¿ç”¨ **GitHub Flow**ï¼š

| åˆ†æ”¯ | å‘½åè§„èŒƒ | ç”¨é€” |
|------|----------|------|
| `main` | æ—  | ç”Ÿäº§ç¯å¢ƒä»£ç  |
| `feature/*` | feature/{åŠŸèƒ½å} | æ–°åŠŸèƒ½å¼€å‘ |
| `bugfix/*` | bugfix/{é—®é¢˜æè¿°} | bug ä¿®å¤ |
| `hotfix/*` | hotfix/{é—®é¢˜æè¿°} | ç´§æ€¥ä¿®å¤ |

---

## 3. Commit è§„èŒƒ

### 3.1 Conventional Commits

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 3.2 Type ç±»å‹

| Type | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `feat` | æ–°åŠŸèƒ½ | `feat(auth): add login API` |
| `fix` | Bug ä¿®å¤ | `fix(database): connection leak` |
| `docs` | æ–‡æ¡£æ›´æ–° | `docs: update API docs` |
| `style` | ä»£ç æ ¼å¼ | `style: format code` |
| `refactor` | é‡æ„ | `refactor(auth): simplify token logic` |
| `test` | æµ‹è¯• | `test: add unit tests for auth` |
| `chore` | æ„å»º/å·¥å…· | `chore: update dependencies` |
| `perf` | æ€§èƒ½ä¼˜åŒ– | `perf(api): cache response` |

### 3.3 ç¤ºä¾‹

```
feat(collaboration): add negotiation protocol

- Implement task_proposal message type
- Add ACK/REJECT/NEGOTIATE response handling
- Add message deduplication

Closes #12
```

---

## 4. Pull Request å·¥ä½œæµ

### 4.1 PR æµç¨‹

```
1. åˆ›å»ºåˆ†æ”¯ â†’ 2. å¼€å‘ â†’ 3. æäº¤ â†’ 4. åˆ›å»º PR â†’ 5. Code Review â†’ 6. åˆå¹¶
```

### 4.2 PR æ¨¡æ¿

```markdown
## æè¿°
<!-- æè¿°è¿™ä¸ª PR åšäº†ä»€ä¹ˆ -->

## å˜æ›´ç±»å‹
- [ ] æ–°åŠŸèƒ½ (feat)
- [ ] Bug ä¿®å¤ (fix)
- [ ] æ–‡æ¡£æ›´æ–° (docs)
- [ ] ä»£ç é‡æ„ (refactor)
- [ ] æµ‹è¯• (test)
- [ ] å…¶ä»– (chore)

## æµ‹è¯•
- [ ] å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ‰‹åŠ¨æµ‹è¯•é€šè¿‡

## Checklist
- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] å¿…è¦çš„æ³¨é‡Šå·²æ·»åŠ 
- [ ] ç›¸å…³æ–‡æ¡£å·²æ›´æ–°
- [ ] æ²¡æœ‰å¼•å…¥æ–°çš„ lint é”™è¯¯

## æˆªå›¾ (å¦‚æœ‰ UI å˜æ›´)
<!-- æ·»åŠ æˆªå›¾ -->
```

### 4.3 Code Review è¦ç‚¹

| æ£€æŸ¥é¡¹ | è¯´æ˜ |
|--------|------|
| **åŠŸèƒ½æ€§** | ä»£ç æ˜¯å¦å®ç°äº†éœ€æ±‚ï¼Ÿ |
| **æ­£ç¡®æ€§** | æ˜¯å¦æœ‰æ½œåœ¨ bugï¼Ÿ |
| **å¯è¯»æ€§** | ä»£ç æ˜¯å¦æ˜“è¯»ï¼Ÿå‘½åæ˜¯å¦æ¸…æ™°ï¼Ÿ |
| **å®‰å…¨æ€§** | æ˜¯å¦æœ‰å®‰å…¨æ¼æ´ï¼Ÿ |
| **æ€§èƒ½** | æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜ï¼Ÿ |
| **æµ‹è¯•** | æ˜¯å¦æœ‰è¶³å¤Ÿçš„æµ‹è¯•è¦†ç›–ï¼Ÿ |

---

## 5. åˆå¹¶ç­–ç•¥

### 5.1 Merge vs Rebase vs Cherry-pick

| ç­–ç•¥ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **Merge** | ä¿ç•™å®Œæ•´å†å²ï¼Œæœ‰åˆå¹¶æäº¤ | ä¸»åˆ†æ”¯åä½œ |
| **Rebase** | çº¿æ€§å†å²ï¼Œæ— åˆå¹¶æäº¤ | ä¸ªäººåˆ†æ”¯æ•´ç† |
| **Cherry-pick** | é€‰æ‹©æ€§åˆå¹¶å•ä¸ªæäº¤ | ç´§æ€¥ä¿®å¤ backport |

### 5.2 åˆå¹¶å†²çªå¤„ç†

```bash
# 1. è¿›å…¥å†²çªçŠ¶æ€
git merge feature/xxx
# è‡ªåŠ¨åˆå¹¶å¤±è´¥ï¼Œä¿®æ”¹å†²çªæ–‡ä»¶

# 2. æŸ¥çœ‹å†²çª
git status
git diff

# 3. è§£å†³å†²çªï¼ˆç¼–è¾‘æ–‡ä»¶ï¼‰
# <<<<<<< HEAD
# å½“å‰åˆ†æ”¯å†…å®¹
# =======
# åˆå¹¶åˆ†æ”¯å†…å®¹
# >>>>>>> feature/xxx

# 4. æ ‡è®°è§£å†³
git add <resolved files>

# 5. å®Œæˆåˆå¹¶
git commit
```

---

## 6. Git å·¥å…·ä¸æœ€ä½³å®è·µ

### 6.1 å¸¸ç”¨å·¥å…·

| å·¥å…· | ç”¨é€” |
|------|------|
| **GitHub CLI** | å‘½ä»¤è¡Œç®¡ç† PRã€Issue |
| **gitk / git gui** | å¯è§†åŒ–æŸ¥çœ‹å†å² |
| **pre-commit** | ä»£ç æ£€æŸ¥é’©å­ |
| **gitmoji** | emoji commit message |

### 6.2 å¸¸ç”¨ Alias

```bash
# ~/.gitconfig
[alias]
    st = status -s
    co = checkout
    br = branch
    ci = commit
    df = diff --staged
    lg = log --oneline --graph --all
    unstage = reset HEAD --
    undo = reset --soft HEAD~1
    trash = clean -fd
```

### 6.3 æœ€ä½³å®è·µ

| å®è·µ | è¯´æ˜ |
|------|------|
| **å°æ­¥æäº¤** | æ¯æ¬¡æäº¤åªåšä¸€ä»¶äº‹ |
| **åŠæ—¶æ¨é€** | æ¯å¤©æ¨é€ï¼Œé¿å…ä»£ç ä¸¢å¤± |
| **ä½¿ç”¨ PR** | æ‰€æœ‰ä»£ç é€šè¿‡ PR åˆå¹¶ |
| **ä¿æŒåŒæ­¥** | ç»å¸¸ rebase main åˆ†æ”¯ |
| **å†™å¥½ message** | æ¸…æ™°æè¿°å˜æ›´å†…å®¹ |
| **ä¿æŠ¤åˆ†æ”¯** | main åˆ†æ”¯ç¦æ­¢ç›´æ¥æ¨é€ |

---

## 7. .gitignore æœ€ä½³å®è·µ

### 7.1 Python é¡¹ç›®

```
# Python
__pycache__/
*.py[cod]
*.egg-info/
dist/
build/
.venv/
venv/
env/
.eggs/

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Environment
.env
.env.local

# Logs
*.log

# Test
.pytest_cache/
.coverage
htmlcov/

# Database
*.sqlite3
```

---

## 8. Yoyoo é¡¹ç›®çš„ Git è§„èŒƒ

### 8.1 ä»“åº“ç»“æ„

```
Yoyoo/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/          # CI/CD
â”‚   â””â”€â”€ ISSUE_TEMPLATE/     # Issue æ¨¡æ¿
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”œâ”€â”€ soul/                   # çµé­‚æ–‡ä»¶
â”œâ”€â”€ BRAIN/                  # è®°å¿†ç³»ç»Ÿ
â”œâ”€â”€ src/                    # æºä»£ç 
â”œâ”€â”€ tests/                  # æµ‹è¯•
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .gitattributes
â”œâ”€â”€ README.md
â”œâ”€â”€ CONTRIBUTING.md
â””â”€â”€ LICENSE
```

### 8.2 CI/CD Pipeline

```yaml
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      - name: Install dependencies
        run: pip install -r requirements.txt
      - name: Run tests
        run: pytest
      - name: Run linter
        run: ruff check src/
```

---

## 9. å­¦ä¹ æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **ä¸‰æ£µæ ‘æ¨¡å‹**: Working â†’ Staging â†’ Repository
2. **GitHub Flow**: ä¸»åˆ†æ”¯ + åŠŸèƒ½åˆ†æ”¯ + PR
3. **Commit è§„èŒƒ**: Conventional Commits (type: subject)
4. **åˆå¹¶ç­–ç•¥**: Merge ä¿ç•™å†å²ï¼ŒRebase çº¿æ€§å†å²
5. **æœ€ä½³å®è·µ**: å°æ­¥æäº¤ã€åŠæ—¶æ¨é€ã€Code Review

### è¿›é˜¶ä¸»é¢˜

- [ ] Submodule (å­æ¨¡å—)
- [ ] LFS (å¤§æ–‡ä»¶å­˜å‚¨)
- [ ] Git Hooks (è‡ªå®šä¹‰é’©å­)
- [ ] Bisect (äºŒåˆ†æŸ¥æ‰¾ bug)
- [ ] Stash (æš‚å­˜ä¿®æ”¹)

---

## å‚è€ƒèµ„æº

- [Git å®˜æ–¹æ–‡æ¡£](https://git-scm.com/doc)
- [GitHub Flow](https://docs.github.com/en/get-started/quickstart/github-flow)
- [Conventional Commits](https://www.conventionalcommits.org/)
